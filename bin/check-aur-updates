#!/bin/bash
#
# Check for updates in each AUR repo

green=$(tput setaf 2)
yellow=$(tput setaf 3)
reset=$(tput sgr0)

aur_folder=~/projects/aur
for d in "$aur_folder"/*; do
  cd "$d" || continue
  current_head=$(git log | head -1 | cut -d ' ' -f2)
  current_branch=$(git rev-parse --abbrev-ref HEAD)

  git pull --quiet origin "$current_branch"

  new_head=$(git log | head -1 | cut -d ' ' -f2)
  if [[ "$current_head" == "$new_head" ]]; then
    echo -e "${yellow}${d##*/} -- no update available${reset}"
  else
    echo -e "${green}${d##*/} -- update available!${reset}"
  fi
done
